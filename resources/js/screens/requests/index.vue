<script type="text/ecmascript-6">
    import StylesMixin from './../../mixins/entriesStyles';

    export default {
        mixins: [
            StylesMixin,
        ],
    }
</script>

<template>
    <index-screen title="Requests" resource="requests">
        <tr slot="table-header" slot-scope="slotProps">
            <th scope="col">Verb</th>
            <th scope="col">Path
                <button class="btn btn-sm btn-primary" v-on:click.prevent="slotProps.showHostname">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13" width="12" height="13" style="fill: #fff" class="icon">
                        <path id="Layer" class="shp0" d="M12,6.5c0,3.48 -2.69,6.3 -6,6.3c-3.31,0 -6,-2.82 -6,-6.3c0,-3.48 2.69,-6.3 6,-6.3c3.31,0 6,2.82 6,6.3zM6.14,5.57c0.04,-0.07 0.15,-0.07 0.19,0.01c0.03,0.07 0.1,0.11 0.17,0.11h0.07c0.11,0 0.19,-0.09 0.19,-0.2v-1.98c0,-0.15 -0.08,-0.3 -0.22,-0.37l-0.26,-0.14c-0.13,-0.07 -0.14,-0.27 -0.02,-0.35l1.21,-0.98c-0.47,-0.16 -0.97,-0.25 -1.49,-0.25c-2.67,0 -4.84,2.28 -4.84,5.08c0,0.28 0.03,0.54 0.07,0.81h1.51c0.1,0 0.2,-0.04 0.28,-0.12l0.47,-0.5c0.1,-0.1 0.25,-0.07 0.31,0.06l0.55,1.15c0.07,0.14 0.2,0.22 0.35,0.22h0.15c0.22,0 0.39,-0.18 0.39,-0.41v-0.24c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.14,-0.14c-0.08,-0.08 -0.08,-0.21 0,-0.28l0.14,-0.14c0.07,-0.07 0.17,-0.12 0.28,-0.12h0.01c0.14,0 0.26,-0.07 0.33,-0.2zM9.87,9.1v-0.63c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.29,-0.3c-0.04,-0.04 -0.05,-0.09 -0.05,-0.14v-0.33c0,-0.06 -0.04,-0.1 -0.1,-0.1h-0.14c-0.04,0 -0.08,0.03 -0.09,0.07l-0.1,0.37c-0.01,0.04 -0.05,0.07 -0.09,0.07h-0.09c-0.04,0 -0.07,-0.02 -0.09,-0.06l-0.13,-0.33c-0.03,-0.07 -0.1,-0.12 -0.18,-0.12h-0.29c-0.04,0 -0.08,0.01 -0.11,0.04l-0.58,0.43c-0.04,0.03 -0.09,0.06 -0.14,0.08l-0.95,0.4c-0.07,0.03 -0.12,0.11 -0.12,0.19v0.26c0,0.06 0.02,0.11 0.05,0.14l0.29,0.3c0.07,0.07 0.17,0.12 0.28,0.12h0.25c0.03,0 0.07,-0.01 0.1,-0.01l0.52,-0.14c0.22,-0.06 0.46,0.01 0.62,0.18l0.31,0.33c0.07,0.07 0.17,0.12 0.28,0.12h0.37c0.1,0 0.2,-0.04 0.28,-0.12l0.23,-0.24c0.07,-0.07 0.11,-0.18 0.11,-0.28z" />
                    </svg>
                </button>
            </th>
            <th scope="col">Status</th>
            <th scope="col">Happened</th>
            <th scope="col"></th>
        </tr>


        <template slot="row" slot-scope="slotProps">
            <td class="table-fit pr-0">
                <span class="badge font-weight-light" :class="'badge-'+requestMethodClass(slotProps.entry.content.method)">
                    {{slotProps.entry.content.method}}
                </span>
            </td>

            <td>
                <div :title="slotProps.entry.content.headers.host" v-show="slotProps.showsHostname">
                    <span class="badge header-host" :style="'background-color:#'+slotProps.entry.hostname_color">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13" width="12" height="13" style="fill: #ffffff" class="icon">
                            <path id="Layer" class="shp0" d="M12,6.5c0,3.48 -2.69,6.3 -6,6.3c-3.31,0 -6,-2.82 -6,-6.3c0,-3.48 2.69,-6.3 6,-6.3c3.31,0 6,2.82 6,6.3zM6.14,5.57c0.04,-0.07 0.15,-0.07 0.19,0.01c0.03,0.07 0.1,0.11 0.17,0.11h0.07c0.11,0 0.19,-0.09 0.19,-0.2v-1.98c0,-0.15 -0.08,-0.3 -0.22,-0.37l-0.26,-0.14c-0.13,-0.07 -0.14,-0.27 -0.02,-0.35l1.21,-0.98c-0.47,-0.16 -0.97,-0.25 -1.49,-0.25c-2.67,0 -4.84,2.28 -4.84,5.08c0,0.28 0.03,0.54 0.07,0.81h1.51c0.1,0 0.2,-0.04 0.28,-0.12l0.47,-0.5c0.1,-0.1 0.25,-0.07 0.31,0.06l0.55,1.15c0.07,0.14 0.2,0.22 0.35,0.22h0.15c0.22,0 0.39,-0.18 0.39,-0.41v-0.24c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.14,-0.14c-0.08,-0.08 -0.08,-0.21 0,-0.28l0.14,-0.14c0.07,-0.07 0.17,-0.12 0.28,-0.12h0.01c0.14,0 0.26,-0.07 0.33,-0.2zM9.87,9.1v-0.63c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.29,-0.3c-0.04,-0.04 -0.05,-0.09 -0.05,-0.14v-0.33c0,-0.06 -0.04,-0.1 -0.1,-0.1h-0.14c-0.04,0 -0.08,0.03 -0.09,0.07l-0.1,0.37c-0.01,0.04 -0.05,0.07 -0.09,0.07h-0.09c-0.04,0 -0.07,-0.02 -0.09,-0.06l-0.13,-0.33c-0.03,-0.07 -0.1,-0.12 -0.18,-0.12h-0.29c-0.04,0 -0.08,0.01 -0.11,0.04l-0.58,0.43c-0.04,0.03 -0.09,0.06 -0.14,0.08l-0.95,0.4c-0.07,0.03 -0.12,0.11 -0.12,0.19v0.26c0,0.06 0.02,0.11 0.05,0.14l0.29,0.3c0.07,0.07 0.17,0.12 0.28,0.12h0.25c0.03,0 0.07,-0.01 0.1,-0.01l0.52,-0.14c0.22,-0.06 0.46,0.01 0.62,0.18l0.31,0.33c0.07,0.07 0.17,0.12 0.28,0.12h0.37c0.1,0 0.2,-0.04 0.28,-0.12l0.23,-0.24c0.07,-0.07 0.11,-0.18 0.11,-0.28z" />
                        </svg>
                    </span>
                    {{slotProps.entry.content.headers.host}}
                </div>
                <div :title="slotProps.entry.content.uri">
                    <span v-show="!slotProps.showsHostname" class="badge header-host" :style="'background-color:#'+slotProps.entry.hostname_color">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 13" width="12" height="13" style="fill: #ffffff" class="icon">
                            <path id="Layer" class="shp0" d="M12,6.5c0,3.48 -2.69,6.3 -6,6.3c-3.31,0 -6,-2.82 -6,-6.3c0,-3.48 2.69,-6.3 6,-6.3c3.31,0 6,2.82 6,6.3zM6.14,5.57c0.04,-0.07 0.15,-0.07 0.19,0.01c0.03,0.07 0.1,0.11 0.17,0.11h0.07c0.11,0 0.19,-0.09 0.19,-0.2v-1.98c0,-0.15 -0.08,-0.3 -0.22,-0.37l-0.26,-0.14c-0.13,-0.07 -0.14,-0.27 -0.02,-0.35l1.21,-0.98c-0.47,-0.16 -0.97,-0.25 -1.49,-0.25c-2.67,0 -4.84,2.28 -4.84,5.08c0,0.28 0.03,0.54 0.07,0.81h1.51c0.1,0 0.2,-0.04 0.28,-0.12l0.47,-0.5c0.1,-0.1 0.25,-0.07 0.31,0.06l0.55,1.15c0.07,0.14 0.2,0.22 0.35,0.22h0.15c0.22,0 0.39,-0.18 0.39,-0.41v-0.24c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.14,-0.14c-0.08,-0.08 -0.08,-0.21 0,-0.28l0.14,-0.14c0.07,-0.07 0.17,-0.12 0.28,-0.12h0.01c0.14,0 0.26,-0.07 0.33,-0.2zM9.87,9.1v-0.63c0,-0.11 -0.04,-0.21 -0.11,-0.28l-0.29,-0.3c-0.04,-0.04 -0.05,-0.09 -0.05,-0.14v-0.33c0,-0.06 -0.04,-0.1 -0.1,-0.1h-0.14c-0.04,0 -0.08,0.03 -0.09,0.07l-0.1,0.37c-0.01,0.04 -0.05,0.07 -0.09,0.07h-0.09c-0.04,0 -0.07,-0.02 -0.09,-0.06l-0.13,-0.33c-0.03,-0.07 -0.1,-0.12 -0.18,-0.12h-0.29c-0.04,0 -0.08,0.01 -0.11,0.04l-0.58,0.43c-0.04,0.03 -0.09,0.06 -0.14,0.08l-0.95,0.4c-0.07,0.03 -0.12,0.11 -0.12,0.19v0.26c0,0.06 0.02,0.11 0.05,0.14l0.29,0.3c0.07,0.07 0.17,0.12 0.28,0.12h0.25c0.03,0 0.07,-0.01 0.1,-0.01l0.52,-0.14c0.22,-0.06 0.46,0.01 0.62,0.18l0.31,0.33c0.07,0.07 0.17,0.12 0.28,0.12h0.37c0.1,0 0.2,-0.04 0.28,-0.12l0.23,-0.24c0.07,-0.07 0.11,-0.18 0.11,-0.28z" />
                        </svg>
                    </span>
                    {{truncate(slotProps.entry.content.uri, 70)}}
                </div>
            </td>

            <td class="table-fit">
                <span class="badge font-weight-light" :class="'badge-'+requestStatusClass(slotProps.entry.content.response_status)">
                    {{slotProps.entry.content.response_status}}
                </span>
            </td>

            <td class="table-fit" :data-timeago="slotProps.entry.created_at">{{timeAgo(slotProps.entry.created_at)}}</td>

            <td class="table-fit">
                <router-link :to="{name:'request-preview', params:{id: slotProps.entry.id}}" class="control-action">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 16">
                        <path d="M16.56 13.66a8 8 0 0 1-11.32 0L.3 8.7a1 1 0 0 1 0-1.42l4.95-4.95a8 8 0 0 1 11.32 0l4.95 4.95a1 1 0 0 1 0 1.42l-4.95 4.95-.01.01zm-9.9-1.42a6 6 0 0 0 8.48 0L19.38 8l-4.24-4.24a6 6 0 0 0-8.48 0L2.4 8l4.25 4.24h.01zM10.9 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"></path>
                    </svg>
                </router-link>
            </td>
        </template>
    </index-screen>
</template>
